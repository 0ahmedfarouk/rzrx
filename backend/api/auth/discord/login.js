const CID=process.env.DISCORD_CLIENT_ID;const RURI=process.env.DISCORD_REDIRECT_URI;export default function h(req,res){if(!CID||!RURI)return res.status(500).json({error:'Missing Discord env'});const state=Math.random().toString(36).slice(2);const u=new URL('https://discord.com/oauth2/authorize');u.searchParams.set('client_id',CID);u.searchParams.set('response_type','code');u.searchParams.set('redirect_uri',RURI);u.searchParams.set('scope','identify');u.searchParams.set('state',state);res.setHeader('Set-Cookie',`oauth_state=${state}; Path=/; HttpOnly; Secure; SameSite=Lax; Max-Age=600`);res.writeHead(302,{Location:u.toString()});res.end()}